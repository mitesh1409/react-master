# Module #2: JavaScript Fundamentals for React

## Shallow and Deep Copy in JavaScript

Topics

- Shallow Copy
- Deep Copy

---

Here are simple examples of each:

## Shallow Copy

Copies only the first level of an object/array. Nested objects/arrays are still referenced:

```javascript
// Using spread operator (...)
const original = {
  name: "Alice",
  age: 25,
  hobbies: ["reading", "gaming"]
};

const shallowCopy = { ...original };

shallowCopy.name = "Bob";           // Changes only the copy
shallowCopy.hobbies.push("coding"); // Changes BOTH original and copy!

console.log(original.name);    // "Alice" (unchanged)
console.log(original.hobbies); // ["reading", "gaming", "coding"] (changed!)
console.log(shallowCopy.hobbies); // ["reading", "gaming", "coding"]

// Array shallow copy
const arr1 = [1, 2, [3, 4]];
const arr2 = [...arr1];

arr2[0] = 99;      // Only changes arr2
arr2[2][0] = 999;  // Changes BOTH arr1 and arr2!

console.log(arr1); // [1, 2, [999, 4]]
console.log(arr2); // [99, 2, [999, 4]]
```

## Deep Copy

Copies all levels, creating completely independent copies:

```javascript
const original = {
  name: "Alice",
  age: 25,
  hobbies: ["reading", "gaming"],
  address: {
    city: "Paris"
  }
};

// Using structuredClone (modern way)
const deepCopy = structuredClone(original);

deepCopy.name = "Bob";
deepCopy.hobbies.push("coding");
deepCopy.address.city = "London";

console.log(original.name);         // "Alice" (unchanged)
console.log(original.hobbies);      // ["reading", "gaming"] (unchanged)
console.log(original.address.city); // "Paris" (unchanged)

console.log(deepCopy.address.city); // "London"

// Alternative: JSON method (has limitations with functions, dates, etc.)
const deepCopy2 = JSON.parse(JSON.stringify(original));
```

**Key difference:**  
Shallow copy shares nested references,  
deep copy creates completely independent copies at all levels.

---

Great questions! Yes, there are multiple ways for both:

## Shallow Copy - Other Methods

```javascript
const original = { name: "Alice", age: 25, hobbies: ["reading"] };

// 1. Spread operator (you already know this)
const copy1 = { ...original };

// 2. Object.assign()
const copy2 = Object.assign({}, original);

// 3. For arrays - Array.from()
const arr = [1, 2, 3];
const arrCopy1 = [...arr];
const arrCopy2 = Array.from(arr);
const arrCopy3 = arr.slice();  // slice() with no arguments
```

## Deep Copy - Other Methods

```javascript
const original = { 
  name: "Alice", 
  hobbies: ["reading"], 
  address: { city: "Paris" } 
};

// 1. structuredClone() - Modern and recommended
const copy1 = structuredClone(original);

// 2. JSON method (has limitations)
const copy2 = JSON.parse(JSON.stringify(original));

// 3. Using a library like Lodash
// const copy3 = _.cloneDeep(original);  // requires lodash

// 4. Manual recursive function
function deepCopy(obj) {
  if (obj === null || typeof obj !== "object") return obj;
  
  if (Array.isArray(obj)) {
    return obj.map(item => deepCopy(item));
  }
  
  const copy = {};
  for (let key in obj) {
    copy[key] = deepCopy(obj[key]);
  }
  return copy;
}

const copy4 = deepCopy(original);
```

**Recommendation:**  
Use `structuredClone()` for deep copies (it handles dates, RegExp, and more).  
The JSON method fails with functions, `undefined`, `Date` objects, and circular references.
